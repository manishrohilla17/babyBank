<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Baby Bank</title>
		<meta charset="UTF-8" />
		<style>
			#error{
				color: red;
				font-size: small;
			}
		</style>
	</head>
	<body>
		<div align="center"><h1>DEPOSIT</h1></div>
		<div>
				<form id="myForm" action="#" method="post">
					<br>
					Applicant: <input type="text" name="Applicant" required /><br><br>
					Amount: <input type="number" name="amount" id="amount" required /><br><br>
					Type: <select name="loan-type" id="loan-type" onchange="onTypeChange()" required>
								<option value="none" selected disabled hidden>Select An Option</option>
								<option value="Home">Home</option>
					 		    <option value="Car">Car</option>
					  			<option value="Personal">Personal</option>
						  </select><br><br>
					ROI(%):<input type="number" name="amount" id="roi" disabled required/><br><br>
					Duration(in years): <input type="number" name="duration" id="duration" onkeyup="onDurationChange()" required /><br>
					<span id="error"></span><br>
					Maturity:<input type="number" name="emi" id="emi" disabled required/><br><br>
					<input type="submit" value="Submit"/>
					<input type="reset" value="Reset"><br><br>
				</form>
			</ul>
		</div>
	</body>
	<script>
		function onTypeChange(){
			var loanType = document.getElementById("loan-type").value;
    		if(loanType == "Home"){
				document.getElementById("roi").value = 7
			}
			else if(loanType == "Car"){
				document.getElementById("roi").value = 10
			}
			else if(loanType == "Personal"){
				document.getElementById("roi").value = 12
			}
		}

		function onDurationChange(){
			var duration = document.getElementById("duration").value
			var loanType = document.getElementById("loan-type").value;
			var error = document.getElementById("error")
			if(loanType == "Home"){
				if(duration < 25){
					error.textContent=""
					clearTimeout(timer)
					var timer = setTimeout(()=>{
						compute.apply(this)
					},1000);
				}
				else{
					error.textContent = "Home Loan should be below 25 Years"
				}
			}
			else if(loanType == "Car"){
				if(duration < 7){
					error.textContent=""
					clearTimeout(timer)
					var timer = setTimeout(()=>{
						compute.apply(this)
					},1000);
				}
				else{
					error.textContent = "Car Loan should be below 7 Years"
				}
			}
			else if(loanType == "Personal"){
				if(duration < 5){
					error.textContent=""
					clearTimeout(timer)
					var timer = setTimeout(()=>{
						compute.apply(this)
					},1000);	
				}
				else{
					error.textContent = "Personal Loan should be below 5 Years"
				}
			}
		}
		function compute(){
			var amount = document.getElementById("amount").value
			var duration = document.getElementById("duration").value
			var roi = document.getElementById("roi").value
			var emi = (amount * roi * duration)/100
			document.getElementById("emi").value = emi
		}
	</script>
</html>
